<section class="product-info__block product-info__block--title container" {{ block.shopify_attributes }}>
  {% assign ingredients = product.metafields.custom.ingredient_list.value %}
  {% assign bg_color = section.settings.card_bg_color %}

  {% if ingredients != blank %}
    <div class="ingredients-section relative">
      <div class="flex justify-between items-center mb-6">
        <h1 class="product-title h2">Specifically Chosen Ingredients, Tailored For Your Skin</h1>
        <div class="ingredient-nav flex gap-2">
          <button class="prev-btn" aria-label="Previous">
            <!-- Your Left Arrow SVG -->
            {% render 'icon-arrow-left' %}
          </button>
          <button class="next-btn" aria-label="Next">
            <!-- Your Right Arrow SVG -->
       {% render 'icon-arrow-right' %}
          </button>
        </div>
      </div>

      <div class="ingredient-slider owl-carousel">
        {% for ingredient in ingredients %}
          <div class="ingredient-box p-6 rounded text-center h-full" style="background-color: {{ bg_color }}; min-height: 180px;">
            <h3 class="text-xl font-bold mb-2">{{ ingredient.title }}</h3>
            <p class="text-sm">{{ ingredient.description }}</p>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</section>
<!-- Include Owl Carousel CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/assets/owl.carousel.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/owl.carousel.min.js"></script>

<script>
  $(document).ready(function(){
    var owl = $('.ingredient-slider');
    owl.owlCarousel({
      items: 2,
      margin: 20,
      dots: false,
      nav: false,
      responsive: {
        768: {
          items: 4
        }
      }
    });

    $('.next-btn').click(function() {
      owl.trigger('next.owl.carousel');
    });

    $('.prev-btn').click(function() {
      owl.trigger('prev.owl.carousel');
    });
    function updateNavButtonStates(slider, prevBtn, nextBtn) {
  const scrollLeft = slider.scrollLeft;
  const maxScroll = slider.scrollWidth - slider.clientWidth;

  prevBtn.disabled = scrollLeft <= 0;
  nextBtn.disabled = scrollLeft >= maxScroll - 1;
}

  });
</script>
{% schema %}
{
  "name": "Ingredients Section",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color",
      "id": "card_bg_color",
      "label": "Card Background Color",
      "default": "#c3dbef"
    }
  ],
  "presets": [
    {
      "name": "Ingredients Section"
    }
  ]
}
{% endschema %}
